{% extends 'base.html' %}
{% load static %}
{% block content1 %}
<head>
<title>Weather</title>
    <meta charset="utf-8">
    <script src="http://code.jquery.com/jquery-1.7.min.js" ></script>
    <link rel="stylesheet" href="{%static 'weather_api.css'%}" />
</head>
<script>
    /*
    $.getJSON('파일경로',function(data){
        //data로 할일..
    })
    */
    // $.getJSON('https://api.openweathermap.org/data/2.5/forecast?id=1835847&appid=427e3143218a74e94db4542b0c4f4a47&units=metric',
    $.getJSON('https://api.openweathermap.org/data/2.5/weather?id=1835847&appid=427e3143218a74e94db4542b0c4f4a47&units=metric',
    function(data){
        //data로 할일..
        // alert(data.list[0].main.temp_min);

        var $cTemp = data.main.temp;
        var $minTemp = data.main.temp_min;
        var $maxTemp = data.main.temp_max;
        var $now = new Date(Date.now());
        var $cDate = $now.getFullYear() + '/' + ($now.getMonth()+1) + '/' +$now.getDate() + '/' + $now.getHours() + ':' + $now.getMinutes();
        var $wIcon = data.weather[0].icon;
        //Date.now(); == $.now
        // new Date(Date.now());
        // .getFullYear() 연도
        // .getMonth(), => 0이 1월
        // .getDate()
        // .getHours() 시간 .getMinutes() 분

        //A.appendTo(B) b요소의 내용의 뒤에 a를 추가
        //A.append(B) a요소의 내용의 뒤에 b를 추가
        //A.prependTo(B) b요소의 내용의 앞에 a를 추가
        //A.prepend(B) a요소의 내용의 앞에 b를 추가
        $('.ctemp').append($cTemp)
        $('.clowtemp').append($minTemp)
        $('.chightemp').append($maxTemp)
        $('h2').prepend($cDate);
        $('.cicon').append('<img src="https://openweathermap.org/img/wn/' + $wIcon + '@2x.png" />')
       
    }
)
</script>
<body>
<h1>WEATHER KOR/SEOUL</h1>
<h1></h1>
<h2></h2>
<div class="ctemp">현재 온도: </div>
<div class="clowtemp">최저 온도: </div>
<div class="chightemp">최고 온도: </div>
<div class="cicon"></div>
<!-- HTML -->
<script type="text/javascript" src="weather_api.js"></script>
</body>

{% endblock %}
</html>
